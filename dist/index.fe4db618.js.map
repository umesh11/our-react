{"mappings":"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","sources":["index.tsx"],"sourcesContent":["let React = {\r\n    createElement: (tag, props, ...children) => {\r\n        if (typeof tag == \"function\"){\r\n            try {\r\n            return tag(props);\r\n            } catch ({promise, key}) {\r\n                promise.then(data => {\r\n                    console.log(promise);\r\n                    promiseCache.set(key,data);\r\n                    rerender();\r\n                })\r\n                return {tag: 'h1', props: {children: ['I AM LOADING']}}\r\n            }\r\n        }\r\n    var element = {tag, props: {...props, children}};\r\n//    console.log( element );\r\n    return element;\r\n    },\r\n};\r\n\r\n\r\nconst promiseCache = new Map();\r\n\r\nconst createResouce = (thingThatReturnsSomething, key) => {\r\n    if (promiseCache.has(key)){\r\n        return promiseCache.get(key);\r\n    }\r\n    throw {promise: thingThatReturnsSomething(), key};\r\n}\r\n\r\nconst App = () => {\r\n    const [name, setName] = useState(\"person\");\r\n    const [count, setCount] = useState(0);\r\n    const  dogPhotoUrl = createResouce(() => fetch(\"https://dog.ceo/api/breeds/image/random\")\r\n            .then(r => r.json())\r\n            .then(payload => payload.message), 'dogPhoto');\r\n    \r\n    return (\r\n        <div className=\"react-2020\">\r\n        <h1>Hello, {name}!</h1>\r\n        <input value={name} onchange={e => setName(e.target.value)} type=\"text\" placeholder=\"name\" />\r\n        <h2>The count is: {count}</h2>\r\n        {dogPhotoUrl}\r\n        <button onclick={() => setCount(count + 1)}>+</button>\r\n        <button onclick={() => setCount(count - 1)}>-</button>\r\n        <p>Yes</p></div>\r\n);\r\n};\r\n\r\n\r\nconst states = []\r\nlet stateCursor = 0;\r\n\r\nconst useState = (initialState) => {\r\n    const FROZENCURSOR = stateCursor;\r\n    states[FROZENCURSOR] = states[FROZENCURSOR] || initialState;\r\n    \r\n    console.log(states);\r\n    const setState = (newState) => {\r\n        states[FROZENCURSOR] = newState;\r\n        rerender();\r\n        };\r\n    stateCursor++;\r\n\r\n    return [states[FROZENCURSOR], setState]\r\n}\r\n\r\nconst renderer = (reactElement, container) => {\r\n    if(['string','number'].includes(typeof reactElement)){\r\n        container.appendChild(document.createTextNode(String(reactElement)));\r\n        return;\r\n    }\r\n    const actualDomElement = document.createElement(reactElement.tag);\r\n    if (reactElement.props) {\r\n        Object.keys(reactElement.props).filter(p => p != 'children').forEach(p => actualDomElement[p] = reactElement.props[p]);\r\n    }\r\n    if (reactElement.props.children) {\r\n        reactElement.props.children.forEach(child => renderer(child, actualDomElement));\r\n    }\r\n    \r\n    container.appendChild(actualDomElement);\r\n\r\n}\r\n\r\nconst rerender = () => {\r\n    stateCursor = 0;\r\n    document.querySelector(\"#app\").firstChild.remove();\r\n    renderer(<App />, document.querySelector('#app'));\r\n}\r\n\r\nrenderer(<App />, document.querySelector('#app'));"],"names":[],"version":3,"file":"index.fe4db618.js.map","sourceRoot":"/__parcel_source_root/"}